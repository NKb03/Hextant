apply plugin: 'com.github.nkb03.hextant-library'
apply plugin: 'kotlin-kapt'
apply plugin: 'org.openjfx.javafxplugin'
apply plugin: 'application'

hextant_lib {
    description = 'Launcher for the Hextant platform'
}

version '1.0-SNAPSHOT'

javafx {
    version = '11.0.2'
    modules = ['javafx.controls']
    configuration = 'compile'
}

application {
    mainClassName = 'hextant.main.Main'
    applicationDefaultJvmArgs = ['--add-opens', 'java.base/jdk.internal.loader=ALL-UNNAMED']
}

kapt {
    useBuildCache = true
    annotationProcessors("hextant.codegen.MainProcessor")
}

dependencies {
    compile project(':hextant-plugins:client')
    compileOnly project(":hextant-core")
    kapt project(":hextant-codegen")
}

jar {
    from {
        configurations.compile.collect { it.isDirectory() ? it : zipTree(it) }
    }
    manifest {
        attributes(
                'Main-Class': 'hextant.main.Main',
                'Add-Opens': 'java.base/jdk.internal.loader'
        )
    }
}